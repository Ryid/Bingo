<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Bingo</h1>
    <h3 id="number">Number</h3>
    <table id="board"></table>
    <button id="next" onclick="displayNum()">Next Number</button>

    <style type="text/css">
        body {
            text-align: center;
        }

        .square {
            width: 4em;
            height: 4em;
            border: 0.25em solid rgb(102, 0, 102);
        }

        table {
            margin: auto;
        }
    </style>

    <script type="text/javascript">
        var board = document.getElementById("board");
        var rows = 5;
        var cols = 5;
        var randomNum = document.getElementById("number");
        var numsOnBoard = [];
        var nextNum = document.getElementById("next");
        var pickedNums = [];
        var indices = [];

        makeBoard();
        displayNum();

        function makeBoard() {
            for (var row = 0; row < rows; row++) {
                var r = board.insertRow(row);
                for (var col = 0; col < cols; col++) {
                    var cell = r.insertCell(col);
                    cell.setAttribute("class", "square");
                    var num = getRandomInt(1, 50);
                    while (checkArray(num, numsOnBoard)) {
                        num = getRandomInt(1, 50)
                    }
                    numsOnBoard.push(num);
                    cell.innerHTML = num;
                    cell.onclick = clickSquare;
                    cell.index = row * 5 + col;
                }
            }
        }

        //Helper functions
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function displayNum() {
            var currentNum = getRandomInt(1, 50);
            console.log(currentNum);
            while (checkArray(currentNum, pickedNums)) {
                currentNum = getRandomInt(1, 50);
                console.log("currentNum");
                if (pickedNums.length >= 50) {
                    break;
                }
            }
            console.log(currentNum);
            pickedNums.push(currentNum);
            randomNum.innerHTML = currentNum;
        }

        function checkArray(number, array) {
            console.log("Checking array for" + number);
            for (var count = 0; count < array.length; count++) {
                if (array[count] == number) {
                    return true;
                }
            }
            return false;
        }
        function clickSquare() {
            console.log(randomNum.innerHTML, this.innerHTML);
            if (randomNum.innerHTML == this.innerHTML) {
                this.style.backgroundColor = "crimson";
                indices.push(this.index);
                checkWin();
            }
        }
        function check5(i1, i2, i3, i4, i5) {
            return checkArray(i1, indices)
                && checkArray(i2, indices)
                && checkArray(i3, indices)
                && checkArray(i4, indices)
                && checkArray(i5, indices)
        }
        function checkWin() {
            console.log(indices);
            if (check5(0, 1, 2, 3, 4)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(5, 6, 7, 8, 9)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(10, 11, 12, 13, 14)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(15, 16, 17, 18, 19)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(20, 21, 22, 23, 24)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(0, 5, 10, 15, 20)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(1, 6, 11, 16, 21)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(2, 7, 12, 17, 22)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(3, 8, 13, 18, 23)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(4, 9, 14, 19, 24)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(0, 6, 12, 18, 24)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
            if (check5(4, 8, 12, 16, 20)) {
                alert("Bingo!");
                board.innerHTML = "";
                makeBoard();
            }
        }
    </script>
</body>

</html>